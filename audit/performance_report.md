# –û—Ç—á–µ—Ç –ø–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

**–î–∞—Ç–∞:** 13.02.2026

## 1. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞

- **–†–∞–∑–º–µ—Ä –±–∞–Ω–¥–ª–∞:**
  - `index.js`: ~124kB (gzipped) - **–ü—Ä–∏–µ–º–ª–µ–º–æ** (–í–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ –Ω–æ—Ä–º—ã –¥–ª—è –ª–æ–≥–∏–∫–∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è).
  - CSS: ~9kB (gzipped) - **–û—Ç–ª–∏—á–Ω–æ**.
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∫–æ–¥–∞ (Code Splitting):**
  - –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ (Lazy loading) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–ª—è –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–æ–≤ (`TasksScreen`, `HabitsScreen` –∏ —Ç.–¥.).
  - –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –≤–µ–Ω–¥–æ—Ä–Ω—ã—Ö —á–∞–Ω–∫–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è Vite –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é.

## 2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ë—ç–∫–µ–Ω–¥–∞ (Worker)

### üî¥ –ö—Ä–∏—Ç–∏—á–Ω–æ: –ü—Ä–æ–±–ª–µ–º–∞ N+1 –∑–∞–ø—Ä–æ—Å–æ–≤

- **–§–∞–π–ª:** `worker/src/worker.ts`
- **–ü—Ä–æ–±–ª–µ–º–∞:** –í–Ω—É—Ç—Ä–∏ `POST /api/tasks` (–ø–∞–∫–µ—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ), –∫–æ–¥ –∏—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç `INSERT` –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–∏:

  ```typescript
  for (const task of tasks) {
      await env.DB.prepare('INSERT...').run()
  }
  ```

- **–í–ª–∏—è–Ω–∏–µ:** –í—ã—Å–æ–∫–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è –ø–∞–∫–µ—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–∏ –Ω–∞—á–∞–ª—å–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏). –ó–∞–¥–µ—Ä–∂–∫–∞ D1 –≤—ã—à–µ, —á–µ–º —É –ª–æ–∫–∞–ª—å–Ω—ã—Ö –ë–î; 50 –∑–∞–¥–∞—á = 50 —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ D1: `await env.DB.batch(statements)`.

### üü† –°—Ç—Ä–∞—Ç–µ–≥–∏—è –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

- **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
  - –î–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª—è –∫–µ—à–∏—Ä—É—é—Ç—Å—è –≤ KV (`profile:${userId}`).
- **–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç:**
  - –°–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ –ø—Ä–∏ –∫–∞–∂–¥–æ–π –∑–∞–≥—Ä—É–∑–∫–µ. –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ `stale-while-revalidate` –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ (React Query) –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ–∂–∏–≤—É—â–∏–π KV-–∫–µ—à –¥–ª—è —á–∞—Å—Ç–æ —á–∏—Ç–∞–µ–º—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤.

## 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

- **–ò–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ:**
  - `user_id` —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º –¥–ª—è –≤—Å–µ—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
  - **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è `tasks(user_id, date)`, `habits(user_id)`, `goals(user_id)`.

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–∞—Ç—á–∏–Ω–≥–∞ –≤ Worker:** –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ `env.DB.batch()`.
2. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–Ω–¥–ª–∞ –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞ `switch.js` (32kB) - –∫–∞–∂–µ—Ç—Å—è –±–æ–ª—å—à–∏–º –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã `shadcn/ui` (—É–±–µ–¥–∏—Ç—å—Å—è –≤ tree-shaking).
3. **–ò–Ω–¥–µ–∫—Å—ã –ë–î:** –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é –¥–ª—è —è–≤–Ω–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–æ–≤, –µ—Å–ª–∏ –æ–Ω–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.
